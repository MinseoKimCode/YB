<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë²„íŠ¼ ë‚´ë¹„ê²Œì´ì…˜ ìƒì„¸ ë·° (ëª¨ë°”ì¼ ê½‰ ì±„ìš°ê¸°)</title>
    <style>
        /* 1. HTML/BODY: ì¤‘ì•™ ì •ë ¬ ìœ ì§€ ë° ìŠ¤í¬ë¡¤ í—ˆìš© */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow-y: auto; 
            overflow-x: hidden;
            background-color: #fff; 
            display: flex;
            flex-direction: column;
            justify-content: center; 
            align-items: center;     
        }

        /* 2. ê³ ì •ëœ ì½˜í…ì¸  ì˜ì—­ (375x636) */
        .fixed-viewport {
            width: 375px; 
            height: 636px; 
            position: relative; /* ë‚´ë¶€ absolute ìš”ì†Œì˜ ê¸°ì¤€ì ì´ ë©ë‹ˆë‹¤. */
            overflow: hidden; 
        }

        /* 3. ë°°ê²½ ë ˆì´ì–´ (z-index: 1) */
        .bg-layer {
            position: absolute;
            top: 20px;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            
        }
        
        .bg-layer img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
             
        }

        /* 4. ì´ˆê¸° 4ê°œ ì¹´ë“œ ë·° */
        #initial-view {
            position: absolute;
            top: 20px; left: 0;
            width: 100%; height: 100%;
            z-index: 2;
            transform: translateY(30px); 
            
            display: flex; 
            align-items: center; 
            overflow-x: auto; /* â­ ê°€ë¡œ ìŠ¤í¬ë¡¤ í—ˆìš© */
            overflow-y: hidden;
            white-space: nowrap; 
            padding-left: 20px; 
            padding-right: 20px; 
            box-sizing: border-box;
            scrollbar-width: none;
            -ms-overflow-style: none;
            gap: 7px; /* â­ ì¹´ë“œ ì‚¬ì´ ê°„ê²© ì¶”ê°€ */
        }

        #initial-view::-webkit-scrollbar { display: none; }

        /* 5. ìƒì„¸ ì¹´ë“œ ë·° ì»¨í…Œì´ë„ˆ */
        .detail-scroll-container {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 2;
            transform: translateY(30px); 
            display: block; 
        }

        /* 6. ê°œë³„ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .card, .detail-card {
            width: 337px; 
            height: 478px; 
            flex-shrink: 0; 
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1)); 
            text-decoration: none;
            display: block; 
            cursor: pointer;
        }
        
        .detail-card {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%); 
            display: none; 
        }
        
        .card img, .detail-card img {
            width: 100%;
            height: 100%;
            display: block;
        }

        /* 7. ë‚´ë¹„ê²Œì´ì…˜ ë²„íŠ¼ (ì´ì „, ë‹¤ìŒ) - fixed-viewport ê¸°ì¤€ */
        /* ê¸°ë³¸ ë·°ì—ì„œëŠ” í…ìŠ¤íŠ¸ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ìœ ì§€ (ê¸°ëŠ¥ì€ display: noneìœ¼ë¡œ ìˆ¨ê²¨ì ¸ ìˆì–´ í¬ê²Œ ìƒê´€ ì—†ìŒ) */
        .nav-btn {
            position: absolute;
            top: 20%;
            transform: translateY(-40%); 
            width: 35px;
            height: 35px;
            background: rgba(255,255,255,0.8);
            color: #000;
            border: 1px solid #000; 
            border-radius: 50%;
            font-size: 20px; 
            cursor: pointer;
            z-index: 3; 
            opacity: 1;
            padding: 0;
            margin-bottom: 100px;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            /* SVG ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë‚´ë¶€ í…ìŠ¤íŠ¸/íŒ¨ë”© ì´ˆê¸°í™” */
            line-height: 1; 
            text-align: center;
        }


        /* ë’¤ë¡œê°€ê¸° ë²„íŠ¼ ìœ„ì¹˜ ë° ìŠ¤íƒ€ì¼ ì¡°ì • - fixed-viewport ê¸°ì¤€ */
        #back-btn-ui {
            position: absolute;
            top: 35px; 
            left: 10px;
            z-index: 3;
            width: 35px;
            height: 35px;
            background: rgba(255,255,255,0.8);
            color: #000;
            border: 1px solid #000; 
            border-radius: 50%;
            font-size: 20px; 
            cursor: pointer;
            opacity: 1;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            /* SVG ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë‚´ë¶€ í…ìŠ¤íŠ¸/íŒ¨ë”© ì´ˆê¸°í™” */
            line-height: 1; 
            text-align: center;
        }
        
        /* ë²„íŠ¼ ë‚´ë¶€ SVG ì•„ì´ì½˜ ì¤‘ì•™ ì •ë ¬ ë° í¬ê¸° ì§€ì • */
        .button-icon {
            display: block;
            margin: auto;
        }


        /* 8. í…ŒìŠ¤íŠ¸ ë‹¤ì‹œí•˜ê¸° ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .retry-button {
            text-decoration: none; 
            display: block; 
            width: 335px;
            height: 56px;
            border-radius: 2px;
            margin-top: 20px; 
            margin-bottom: 30px; 
            background-color: #000000; 
            color: white;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            text-align: center;
            line-height: 56px; 
        }

        /* ------------------------------------------------ */
        /* 9. ì „ì²´ í™”ë©´ ëª¨ë“œ ìŠ¤íƒ€ì¼ (Detail View ì‹œ) - **í•µì‹¬ ë³€ê²½ ë¶€ë¶„** */
        /* ------------------------------------------------ */
        .fullscreen-mode {
            /* body ì„¤ì • */
            display: block !important; 
            justify-content: flex-start !important;
            align-items: flex-start !important;
            overflow-y: hidden !important; 
        }

        .fullscreen-mode .fixed-viewport {
            /* fixed-viewport: í™”ë©´ ì „ì²´ë¥¼ ë®ë„ë¡ ê³ ì • */
            width: 100vw !important; 
            height: 100vh !important; 
            margin: 0 !important; 
            top: 0; left: 0; 
            position: fixed !important; 
        }

        .fullscreen-mode .bg-layer, 
        .fullscreen-mode #initial-view, 
        .fullscreen-mode .retry-button {
            display: none !important;
        }

        .fullscreen-mode .detail-scroll-container {
            /* ìƒì„¸ ì¹´ë“œ ì»¨í…Œì´ë„ˆ: ì „ì²´ë¥¼ ë®ê³  flexë¡œ ë‚´ë¶€ ì¹´ë“œ ì¤‘ì•™ ì •ë ¬ */
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            transform: none; 
            display: flex !important; 
            justify-content: center; 
            align-items: center; 
        }

        .fullscreen-mode .detail-card {
            /* ìƒì„¸ ì¹´ë“œ: ê½‰ ì±„ìš°ê¸° */
            width: 100%; 
            height: 100%; 
            position: static; 
            transform: none; 
            box-shadow: none; 
            filter: none;
        }

        .fullscreen-mode .detail-card img {
            /* ì´ë¯¸ì§€: ë¹„ìœ¨ì„ ìœ ì§€í•˜ë©° ê½‰ ì±„ìš°ê¸° */
            width: 100%;
            height: 100%;
            object-fit: contain; 
            background-color: #000; 
        }
        
        /* ğŸŒŸ ë²„íŠ¼: ë·°í¬íŠ¸ì— ê³ ì •(fixed) ë° ìµœìƒë‹¨ Z-indexë¡œ ì´ë¯¸ì§€ ìœ„ì— ë„ìš°ê¸° ğŸŒŸ */
        .fullscreen-mode #back-btn-ui,
        .fullscreen-mode .nav-btn {
            position: fixed !important; /* ë·°í¬íŠ¸ ê¸°ì¤€ìœ¼ë¡œ ê³ ì • */
            z-index: 9999 !important; /* ëª¨ë“  ìš”ì†Œ ìœ„ì— í‘œì‹œ */
            
            /* ê¸°ë³¸ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì œê±° ë° í¬ê¸° ì¬ì„¤ì • */
            background: none !important; /* ë°°ê²½ ì œê±° */
            border: none !important; /* í…Œë‘ë¦¬ ì œê±° */
            box-shadow: none !important; /* ê·¸ë¦¼ì ì œê±° */
            width: auto !important; /* SVG í¬ê¸°ì— ë§ì¶¤ */
            height: auto !important; /* SVG í¬ê¸°ì— ë§ì¶¤ */
            
            /* transform ì”ì—¬ê°’ ë° ìœ„ì¹˜ ì´ˆê¸°í™” */
            top: initial !important; 
            bottom: initial !important; 
            transform: none !important; /* transform ì´ˆê¸°í™” ì¶”ê°€ */
        }
        
        /* ë’¤ë¡œê°€ê¸° ë²„íŠ¼: 24x24 SVG, ìœ„ì¹˜ ì¬ì„¤ì • */
        .fullscreen-mode #back-btn-ui {
            top: 8% !important; 
            left: 20px !important; 
            /* ë‚´ë¶€ ì•„ì´ì½˜ í¬ê¸°(24x24)ì— ë§ê²Œ ë²„íŠ¼ ìì²´ì˜ í¬ê¸°/ìœ„ì¹˜ ì¡°ì • */
        }

        /* ì´ì „/ë‹¤ìŒ ë²„íŠ¼: 34x34 SVG, ìœ„ì¹˜ ì¬ì„¤ì • */
        .fullscreen-mode #prev-btn {
            top: 48.5% !important;
            transform: translateY(-50%) !important;
            left: 20px !important;
        }
        .fullscreen-mode #next-btn {
            top: 48.5% !important;
            transform: translateY(-50%) !important;
            right: 20px !important;
        }

    </style>
</head>
<body>

    <div class="fixed-viewport"> 
        <div class="bg-layer">
            <img src="Image/Detail_page.svg" alt="ë°°ê²½ ì´ë¯¸ì§€">
        </div>

        <button id="back-btn-ui" onclick="resetToInitialView()" style="display: none;">
             <img src="Image/BackButton.svg" class="button-icon" width="24" height="24" alt="ë’¤ë¡œê°€ê¸°">
        </button>
        
        <button id="prev-btn" class="nav-btn" style="display: none;" onclick="navigateCards(-1)">
            <img src="Image/LeftButton.svg" class="button-icon" width="34" height="34" alt="ì´ì „ í˜ì´ì§€">
        </button>
        
        <button id="next-btn" class="nav-btn" style="display: none;" onclick="navigateCards(1)">
            <img src="Image/RightButton.svg" class="button-icon" width="34" height="34" alt="ë‹¤ìŒ í˜ì´ì§€">
        </button>


        <div id="initial-view">
            
            </div>
        
        <div id="detail-views">

            <div id="digital-detail" class="detail-scroll-container" style="display: none;">
                <a href="#" class="detail-card"><img src="Image/ì¹´ë“œ ìƒì„¸_ë””ì§€í„¸ ê³¼ì‚¬ìš© 1.svg" alt="ë””ì§€í„¸ ìƒì„¸ 1"></a>
                <a href="#" class="detail-card"><img src="Image/ì¹´ë“œ ìƒì„¸_ë””ì§€í„¸ ê³¼ì‚¬ìš© 2.svg" alt="ë””ì§€í„¸ ìƒì„¸ 2"></a>
                <a href="#" class="detail-card"><img src="Image/ì¹´ë“œ ìƒì„¸_ë””ì§€í„¸ ê³¼ì‚¬ìš© 3.svg" alt="ë””ì§€í„¸ ìƒì„¸ 3"></a>
            </div>

            <div id="sleep-detail" class="detail-scroll-container" style="display: none;">
                <a href="#" class="detail-card"><img src="Image/ì¹´ë“œ ìƒì„¸_ ìˆ˜ë©´1.svg" alt="ìˆ˜ë©´ ìƒì„¸ 1"></a>
                <a href="#" class="detail-card"><img src="Image/ì¹´ë“œ ìƒì„¸_ ìˆ˜ë©´2.svg" alt="ìˆ˜ë©´ ìƒì„¸ 2"></a>
                <a href="#" class="detail-card"><img src="Image/ì¹´ë“œ ìƒì„¸_ ìˆ˜ë©´3.svg" alt="ìˆ˜ë©´ ìƒì„¸ 3"></a>
            </div>

            <div id="dementia-detail" class="detail-scroll-container" style="display: none;">
                <a href="#" class="detail-card"><img src="Image/ì¹´ë“œ ìƒì„¸_ê°€ì„±ì¹˜ë§¤ 1.svg" alt="ê°€ì„±ì¹˜ë§¤ ìƒì„¸ 1"></a>
                <a href="#" class="detail-card"><img src="Image/ì¹´ë“œ ìƒì„¸_ê°€ì„±ì¹˜ë§¤ 2.svg" alt="ê°€ì„±ì¹˜ë§¤ ìƒì„¸ 2"></a>
                <a href="#" class="detail-card"><img src="Image/ì¹´ë“œ ìƒì„¸_ê°€ì„±ì¹˜ë§¤ 3.svg" alt="ê°€ì„±ì¹˜ë§¤ ìƒì„¸ 3"></a>
            </div>

            <div id="alcohol-detail" class="detail-scroll-container" style="display: none;">
                <a href="#" class="detail-card"><img src="Image/ì¹´ë“œ ìƒì„¸_ ì•Œì½œ1.svg" alt="ì•Œì½œ ìƒì„¸ 1"></a>
                <a href="#" class="detail-card"><img src="Image/ì¹´ë“œ ìƒì„¸_ ì•Œì½œ2.svg" alt="ì•Œì½œ ìƒì„¸ 2"></a>
                <a href="#" class="detail-card"><img src="Image/ì¹´ë“œ ìƒì„¸_ ì•Œì½œ3.svg" alt="ì•Œì½œ ìƒì„¸ 3"></a>
            </div>
            
        </div>
        
    </div>
    
    <a href="index.html" class="retry-button">í…ŒìŠ¤íŠ¸ ë‹¤ì‹œí•˜ê¸°</a>


    <script>
        let currentDetailIndex = 0;
        let activeDetailContainer = null;
        
        // â­ ì¶”ê°€ëœ í•µì‹¬ ë¡œì§: ìµœê³ ì  ì¹´í…Œê³ ë¦¬ ì¹´ë“œ ë™ì  ìƒì„± ë° ì‚½ì…
        document.addEventListener('DOMContentLoaded', () => {
            const finalKey = sessionStorage.getItem('finalResultKey');
            const initialView = document.getElementById('initial-view');
            
            if (!finalKey || !initialView) {
                // í‚¤ê°€ ì—†ìœ¼ë©´ (í…ŒìŠ¤íŠ¸ë¥¼ ê±°ì¹˜ì§€ ì•Šì€ ê²½ìš°), ëª¨ë“  ì¹´ë“œë¥¼ í‘œì‹œí•˜ëŠ” ê¸°ë³¸ ë¡œì§ì„ ìœ ì§€í•˜ê±°ë‚˜ 
                // ë¹ˆ í™”ë©´ì„ í‘œì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” í‚¤ê°€ ì—†ì„ ë•Œ ì•„ë¬´ê²ƒë„ í‘œì‹œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
                initialView.innerHTML = '';
                return;
            }

            // ì¹´í…Œê³ ë¦¬ ì •ë³´ ë§¤í•‘
            const cardInfoMap = {
                // Yellow: ê²°ê³¼_ì¹´ë“œ ë””ì§€í„¸ ê³¼ì‚¬ìš©.svg -> digital-detail
                'Y': { detailId: 'digital-detail', imgSrc: 'Image/ê²°ê³¼_ì¹´ë“œ ë””ì§€í„¸ ê³¼ì‚¬ìš©.svg', alt: 'ë””ì§€í„¸ ê³¼ì‚¬ìš©' },
                // Purple: ê²°ê³¼_ì¹´ë“œ ë¶ˆê·œì¹™ ìˆ˜ë©´.svg -> sleep-detail
                'P': { detailId: 'sleep-detail', imgSrc: 'Image/ê²°ê³¼_ì¹´ë“œ ë¶ˆê·œì¹™ ìˆ˜ë©´.svg', alt: 'ë¶ˆê·œì¹™ ìˆ˜ë©´' },
                // Pink: ê²°ê³¼_ì¹´ë“œ ê°€ì„±ì¹˜ë§¤.svg -> dementia-detail (HTML IDì— ë§ì¶° 'dementia-detail' ì‚¬ìš©)
                'I': { detailId: 'dementia-detail', imgSrc: 'Image/ê²°ê³¼_ì¹´ë“œ ê°€ì„±ì¹˜ë§¤.svg', alt: 'ê°€ì„±ì¹˜ë§¤' },
                // Green: ê²°ê³¼_ì¹´ë“œ ì•Œì½œì„± ë¸”ë™ì•„ì›ƒ.svg -> alcohol-detail
                'G': { detailId: 'alcohol-detail', imgSrc: 'Image/ê²°ê³¼_ì¹´ë“œ ì•Œì½œì„± ë¸”ë™ì•„ì›ƒ.svg', alt: 'ì•Œì½œì„± ë¸”ë™ì•„ì›ƒ' }
            };

            // ìµœê³ ì  ì¹´í…Œê³ ë¦¬ì— í•´ë‹¹í•˜ëŠ” ì¹´ë“œë§Œ ë™ì ìœ¼ë¡œ ìƒì„±
            for (const category of finalKey) { // finalKeyëŠ” 'YP', 'I', 'YG' ë“±
                const info = cardInfoMap[category];
                if (info) {
                    const cardLink = document.createElement('a');
                    cardLink.href = '#';
                    // showDetail í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ í•´ë‹¹ ì¹´ë“œì˜ ìƒì„¸ ë·° IDë¥¼ ì „ë‹¬
                    cardLink.setAttribute('onclick', `showDetail('${info.detailId}'); return false;`); 
                    cardLink.classList.add('card');
                    
                    const cardImg = document.createElement('img');
                    cardImg.src = info.imgSrc;
                    cardImg.alt = info.alt;
                    
                    cardLink.appendChild(cardImg);
                    initialView.appendChild(cardLink);
                }
            }
        });


        function showDetail(targetId) {
            // ì „ì²´ í™”ë©´ ëª¨ë“œ í™œì„±í™”
            document.body.classList.add('fullscreen-mode'); 
            
            document.querySelectorAll('.detail-scroll-container').forEach(view => {
                view.style.display = 'none';
            });

            activeDetailContainer = document.getElementById(targetId);
            activeDetailContainer.style.display = 'flex'; // flexë¡œ ì„¤ì •í•˜ì—¬ ì¤‘ì•™ ì •ë ¬

            const cards = activeDetailContainer.querySelectorAll('.detail-card');
            // SVGë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ê¸°ì¡´ í…ìŠ¤íŠ¸ '>', '<' ëŒ€ì‹  ë‚´ë¶€ì˜ ì´ë¯¸ì§€ë¥¼ ìˆ¨ê¹€
            cards.forEach(card => card.style.display = 'none'); 
            
            currentDetailIndex = 0;
            cards[0].style.display = 'block'; 

            document.getElementById('back-btn-ui').style.display = 'flex'; // flexë¡œ ë³€ê²½
            updateNavigationButtons(cards.length);
        }

        function updateNavigationButtons(totalCards) {
            // ë²„íŠ¼ í‘œì‹œ ì‹œ display: flexë¡œ ë³€ê²½
            document.getElementById('prev-btn').style.display = (currentDetailIndex > 0) ? 'flex' : 'none'; 
            document.getElementById('next-btn').style.display = (currentDetailIndex < totalCards - 1) ? 'flex' : 'none';
        }

        function navigateCards(direction) {
            if (!activeDetailContainer) return;

            const cards = activeDetailContainer.querySelectorAll('.detail-card');
            const totalCards = cards.length;
            
            cards[currentDetailIndex].style.display = 'none';

            currentDetailIndex += direction;
            
            if (currentDetailIndex < 0) currentDetailIndex = 0;
            if (currentDetailIndex >= totalCards) currentDetailIndex = totalCards - 1;

            cards[currentDetailIndex].style.display = 'block';
            
            updateNavigationButtons(totalCards);
        }
        
        function resetToInitialView() {
            // ì „ì²´ í™”ë©´ ëª¨ë“œ ë¹„í™œì„±í™”
            document.body.classList.remove('fullscreen-mode'); 
            
            document.getElementById('prev-btn').style.display = 'none';
            document.getElementById('next-btn').style.display = 'none';
            document.getElementById('back-btn-ui').style.display = 'none';
            
            document.getElementById('initial-view').style.display = 'flex';
            
            // bg-layerì™€ retry-buttonì€ fullscreen-mode í´ë˜ìŠ¤ê°€ ì œê±°ë˜ë©´ì„œ ìë™ìœ¼ë¡œ ë³µì›ë©ë‹ˆë‹¤.
            
            if (activeDetailContainer) {
                activeDetailContainer.style.display = 'none';
                activeDetailContainer = null;
            }
        }
    </script>
</body>
</html>